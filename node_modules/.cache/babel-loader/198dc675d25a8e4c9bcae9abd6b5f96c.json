{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Downloads\\\\memory-card-game\\\\memory_game_NguyenTrungHieu\\\\src\\\\components\\\\Board.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from \"react\";\nimport Card from \"./Card\";\nimport \"../styles/board.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Board = props => {\n  _s();\n\n  const {\n    cards\n  } = props;\n  const [openCards, setOpenCards] = useState([]);\n  const [clearedCards, setClearedCards] = useState([]);\n  const [shouldDisableAllCards, setShouldDisableAllCards] = useState(false);\n  const timeout = useRef(setTimeout(() => {}));\n\n  const evaluate = () => {\n    const [first, second] = openCards;\n    setShouldDisableAllCards(false);\n\n    if (first % (cards.length / 2) + 1 === second % (cards.length / 2) + 1) {\n      setClearedCards(prev => [...prev, first, second]);\n      setOpenCards([]);\n      return;\n    }\n\n    timeout.current = setTimeout(() => {\n      setOpenCards([]);\n    }, 1000);\n  };\n\n  const handleCardClick = id => {\n    if (openCards.length === 1) {\n      setOpenCards(prev => [...prev, id]);\n      setShouldDisableAllCards(true);\n    } else {\n      clearTimeout(timeout.current);\n      setOpenCards([id]);\n    }\n  };\n\n  useEffect(() => {\n    let timeout = setTimeout(() => {});\n\n    if (openCards.length === 2) {\n      timeout = setTimeout(evaluate, 500);\n    }\n\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [openCards]);\n\n  const checkIsFlipped = id => {\n    return clearedCards.includes(id) || openCards.includes(id);\n  };\n\n  const currentCards = cards.map(item => ({ ...item,\n    isDisabled: shouldDisableAllCards,\n    isFlipped: checkIsFlipped(item.id)\n  }));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"board\",\n    children: currentCards.map(item => {\n      return /*#__PURE__*/_jsxDEV(Card, {\n        card: item,\n        onClick: handleCardClick\n      }, item.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 16\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Board, \"Sw+Wur8pf8zyOlnvHXQmhkHB7bo=\");\n\n_c = Board;\nexport default Board;\n\nvar _c;\n\n$RefreshReg$(_c, \"Board\");","map":{"version":3,"names":["useEffect","useRef","useState","Card","Board","props","cards","openCards","setOpenCards","clearedCards","setClearedCards","shouldDisableAllCards","setShouldDisableAllCards","timeout","setTimeout","evaluate","first","second","length","prev","current","handleCardClick","id","clearTimeout","checkIsFlipped","includes","currentCards","map","item","isDisabled","isFlipped"],"sources":["C:/Users/Admin/Downloads/memory-card-game/memory_game_NguyenTrungHieu/src/components/Board.tsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport Card from \"./Card\";\nimport \"../styles/board.scss\";\nimport { ICard } from \"../types/Card\";\n\ntype BoardProps = {\n  cards: ICard[];\n};\n\nconst Board = (props: BoardProps) => {\n  const { cards } = props;\n  const [openCards, setOpenCards] = useState<Array<number>>([]);\n  const [clearedCards, setClearedCards] = useState<Array<number>>([]);\n  const [shouldDisableAllCards, setShouldDisableAllCards] =\n    useState<boolean>(false);\n  const timeout = useRef<NodeJS.Timeout>(setTimeout(() => {}));\n\n  const evaluate = () => {\n    const [first, second] = openCards;\n    setShouldDisableAllCards(false);\n    if (\n      (first % (cards.length / 2)) + 1 ===\n      (second % (cards.length / 2)) + 1\n    ) {\n      setClearedCards((prev) => [...prev, first, second]);\n      setOpenCards([]);\n      return;\n    }\n    timeout.current = setTimeout(() => {\n      setOpenCards([]);\n    }, 1000);\n  };\n\n  const handleCardClick = (id: number) => {\n    if (openCards.length === 1) {\n      setOpenCards((prev) => [...prev, id]);\n      setShouldDisableAllCards(true);\n    } else {\n      clearTimeout(timeout.current);\n      setOpenCards([id]);\n    }\n  };\n\n  useEffect(() => {\n    let timeout: NodeJS.Timeout = setTimeout(() => {});\n    if (openCards.length === 2) {\n      timeout = setTimeout(evaluate, 500);\n    }\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [openCards]);\n\n  const checkIsFlipped = (id: number) => {\n    return clearedCards.includes(id) || openCards.includes(id);\n  };\n\n  const currentCards = cards.map((item) => ({\n    ...item,\n    isDisabled: shouldDisableAllCards,\n    isFlipped: checkIsFlipped(item.id),\n  }));\n\n  return (\n    <div className=\"board\">\n      {currentCards.map((item) => {\n        return <Card key={item.id} card={item} onClick={handleCardClick} />;\n      })}\n    </div>\n  );\n};\n\nexport default Board;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}